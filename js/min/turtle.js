function Turtle(l,ap,ar,m){var x;var am;var ad;var ae;var at;var F;var e;var Z;var E;var aa;var i;var U;var r;var h=Math.PI;var J=h/180;var N=180/h;var ak;var V="";var O="immediate";var d=0;var c=0;var w;var X;var C;var G;var v;var ac="images/turtle.png";var I;var S;var f=false;var t=true;function M(p){p.setTransform(1,0,0,1,0,0);p.clearRect(0,0,ae,at)}function aj(){M(am);am.fillStyle=F;am.strokeStyle=e;am.fillRect(0,0,ae,at);H();aa=ae/2;i=at/2;U=0;r=true;O="immediate";t=true;am.translate(aa,i);M(G);aq()}function ab(){var av=ad;var aw=0,p=0;if(av.offsetParent){do{aw+=av.offsetLeft;p+=av.offsetTop}while(av=av.offsetParent)}return[aw,p]}function q(av,aw,p){if(typeof av==="string"){ad=document.getElementById(av)}if(ad.getContext){am=ad.getContext("2d")}else{return}ae=ad.width;at=ad.height;var ax=ab();C=ad.cloneNode(false);C.setAttribute("id","overlay");C.style.zIndex="100";C.style.position="absolute";C.style.left=ax[0]+"px";C.style.top=ax[1]+"px";ad.parentNode.insertBefore(C,ad);G=C.getContext("2d");y(ac);Z=F=aw||"#000000";E=e=p||"#00FF00";am.save();aj()}function y(p){v=new Image();v.onload=function(){I=v.width;S=v.height;f=true;aq()};v.src=p}function o(p){if(O=="immediate"){am.beginPath();am.moveTo(0,0)}if(r){am.lineTo(0,-p);am.translate(0,-p);if(O=="immediate"){am.stroke()}}else{am.moveTo(0,-p);am.translate(0,-p)}aa+=p*Math.cos(au()*Math.PI/180);i+=p*Math.sin(au()*Math.PI/180);if(t){aq()}}function an(p){o(-p)}function ao(p){U-=p;U%=360;am.rotate(p*Math.PI/180);if(t){aq()}}function K(p){ao(-p)}function n(ax,aw,p){for(var av=0;av<ax;av++){aw.apply(this,p||[])}}function au(){return U+90}function b(){r=true;if(O=="delayed"){am.beginPath();am.moveTo(0,0)}}function ah(){r=false}function k(){if(aa<0||aa>=ae){return true}else{if(i<0||i>=at){return true}else{return false}}}function al(p){ah();o(p);b()}function D(p){ah();o(p);ak=k();an(p);if(!ak){b();o(p)}b()}function s(){return ak}function j(p){Z=p}function T(p){E=p;am.strokeStyle=E}function af(p){V=p;am.fillStyle=V;O="delayed";b()}function A(){am.fill();am.stroke();O="immediate";V=""}function Q(){return ae/2}function P(){return at/2}function a(){return ae}function R(){return at}function g(p,av){d=p;c=av}function L(av,ax,p,aw){return Math.sqrt(Math.pow(p-av,2)+Math.pow(aw-ax,2))}function u(){var p;w=L(d,c,aa,i);if(X===undefined){X=w}if(w>X){p="weaker"}else{p="stronger"}X=w;return p}function H(){if(x){clearInterval(x)}}function z(av,p){function aw(ax){ax=ax||1;av.call();if(p&&ax<p){setTimeout(function(){aw(++ax)},25)}else{x=setInterval(av,25)}}aw(1)}function ai(){G.save();G.clearRect(0,0,ae,at);G.setTransform(1,0,0,1,0,0)}function aq(){ai();if(f){G.translate(aa,at-i);G.rotate(-U*Math.PI/180);G.drawImage(v,-I/2,-S/2,I,S)}G.restore()}function Y(){ai();t=false}function B(){t=true;aq()}this.RESET_CANVAS=M;this.RESET=aj;this.GET_CANVAS_POS=ab;this.INIT=q;this.LOAD_TURTLE=y;this.FORWARD=o;this.BACK=an;this.RIGHT=ao;this.LEFT=K;this.REPEAT=n;this.BEARING=au;this.PENDOWN=b;this.PENUP=ah;this.OUT_OF_BOUNDS=k;this.MOVE_FORWARD=al;this.CHECK_FORWARD=D;this.STUCK=s;this.SET_BG=j;this.SET_LINE=T;this.BEGIN_FILL=af;this.END_FILL=A;this.CENTER_X=Q;this.CENTER_Y=P;this.GET_WIDTH=a;this.GET_HEIGHT=R;this.SET_FOOD=g;this.DIST=L;this.SMELL=u;this.STOP_ANIM=H;this.ANIMATE=z;this.RESET_OVERLAY=ai;this.DRAW_TURTLE=aq;this.HIDE_TURTLE=Y;this.SHOW_TURTLE=B;q(l,ap,ar);var W=this;if(m){for(var ag=0;ag<m.length;ag++){m[ag](W)}}return W};